<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript" src="../js/d3.js">
    </script>
    <script type="text/javascript" src="../js/jquery-3.4.1.min.js">
    </script>
    <script type="text/javascript" src="../js/math.js">
    </script>
</head>
<body>
    <script type="text/javascript">

        let π = Math.PI;
        let t = 2 *  π ;   //整个圆周
        let n = 500;       //系数

        let width = 500;
        let height = 500;
        let outerRadius = width / 2 - 20;   //孤的外半径
        let innerRadius = outerRadius -80;  //孤的内半径
        let dataset = d3.range(0,  t,  t / n)  //提定范围的随机数

        let svg = d3.select('body').append('svg')   //绘制画布
                    .attr('width',width)
                    .attr('height',height);

        let group = svg.append("g")
                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
                .selectAll("path")
                .data(d3.range(0, t, t / n))
                .enter().append("path")
                .attr("d", d3.svg.arc()
                    .outerRadius(outerRadius)
                    .innerRadius(innerRadius)
                    .startAngle(function(d) { return d; })
                    .endAngle(function(d) { return d + t / n * 1.1; }))
                    .style("fill", function(d) { return d3.hsl(d * 360 / t, 1, .5); });


            d3.select(self.frameElement).style("height", height + "px");

    </script>
    <script type="text/javascript">
      $(function(){
        //************************************
        //给每个path加上度数
        var pathArray = $('svg g path');
        var range=0.72,value=0;
        var path;
        for(var i=0;i<pathArray.length;i++){
          path = pathArray[i];
          //value=range*(i+1);
          value=math.chain(math.bignumber(range)).multiply(math.bignumber(i+1));
          path.setAttribute('range',value);
        }
//**********************************************

        $('#svgg2').html($('svg g').html());

        var pathArray2 = $('#svgg2 path');

        for(var i=0;i<pathArray2.length;i++){
          path = pathArray2[i];
          var range = path.getAttribute("range");
          if(Number(range)>180){
          console.log(range);
            path.remove();
          }
        }

      });

      //$("path[range='360']").html()
    </script>



    <svg width="500" height="500">
      <g transform="translate(250,250)" id="svgg2">

      </g>
    </svg>


</body>
</html>
